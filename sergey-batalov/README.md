# Рейтинг пассажира
## Описание проблемы
Отсутствует механизм оценки пассажиров. Нет возможности реагировать на 
неподобающие действия либо характеристики пассажира, а именно:
- хамство
- грязная одежда
- употребление пищи во время движения
- заказ на перевозку конструктивно не расчитаного для автомобиля количества человек
- не указаны дети (необходимо оборудование автомобиля детским креслом)
- домашние животные (могу запачкать автомобиль\аллергия водителя)

## Что даст новый функционал
Возможность дать обратную связь пассажиру, что позволит улучшить отношение пользователей
сервиса к такси. 
Также даст возможность водителям выставлять фильтр по оценке пользователей для принятия заказов.
При недостатке машин приоритет для выдачи заказа будет к пользователям с более высоким рейтингом.

## Основные сценарии использования
1. Выставление оценки водителем после завершения поездки.
2. Приоритизация при принятии заказа для пользователей с более высоким рейтингом.
3. Обратная связь пользователю для улучшения его моральных(?) качеств.

## Архитектура
### Реализация
Использование уже существующий таблиц баз данных и добавление конечной точки для выставления оценки.
В схему БД к таблице заказов добавить поле "рейтинг пользователя" (user_rating)
### API
Описание конечной точки в формате openapi v3
```yaml
openapi: 3.0.0
info:
  description: API для выставления рейтинга заказчика
  version: "0.0.1"
  title:  ДЗ№1 "Рейтинг пассажира"
  contact:
    email: echodiv@outlook.com
paths:
  /user_rating:
    post:
      summary: Post
      operationId: 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetRatingRequest'
        required: true
      responses:
        '201':
          description: Successful Response
        '422':
          description: Validation Error
components:
  schemas:
    SetRatingRequest:
      title: SetRatingRequest
      required:
        - raiting
      type: object
      properties:
        raiting:
          title: User raiting
          type: float
```
#### MVP
#### Финальная реализация
### Тестирование
Необходимо провести функциональное тестирование конечной точки для принятия запросов 
с оценкой заказчика
Оценка граниных значений рейтинга [0-5.0]
Запрос с SetRatingRequest.raiting = [0, 5], как позитивный тест
Запрос с SetRatingRequest.raiting = [-1, 5.1], как негативный тест

### Формат эксперимента внедрения нового функционала
#### На кого включаем эксперимент
Эксперимент начать на контрольной группе состоящей из пассажиров-сотрудников Яндекс.
Водителей необходимо поощрять за заполнение оценки пассажира и уведомлять что это 
эксперимент для улучшения сервиса. 
Данный функционал необходимо проверять на различных тарифах. Возможно на тарифе "эконом" и
"премиум" будет разная реакция на изменения. Возможно оценку нужно будет оставить для определенных тарифов. 

