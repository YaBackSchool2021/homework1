# Фича 1 - Рейтинг пассажира
##### _Пример проработки архитектуры_
---
## Описание
Добавить в приложение Pro возможность оставления водителем оценки пассажиру. Это нововведение позводит давать комментарии по поведению пассажира, о его задержках/опозданиях, оставленных чаевых, об отношении к водителю, терпимости к курению, разговорчивости/молчаливости и т.д.

---
## Гипотеза
Перед водителями часто встает ситуация по выбору одного из нескольких пассажиров. Сейчас выбор водителя полностью зависит от стоимости и направления поездки, начальной локации пассажира. Можно дать водителю дополнительный критерий выбора пассажира, чтобы водитель заранее понимал, с кем пройдет его следующая поездка, чтобы он смог сделать более подходящий для себя выбор.

Такой подход будет полезен для бизнеса тем, что при выборе более подходящего для себя пассажира удовлетворенность сервисом у водителей будет расти. Это будет способствовать привлечению новых водителей и уменьшению оттока нынешних водителей к конкурентам с меньшими комиссиями за поездку. Увеличение количества водителей ускорит подбор машины пассажирами, уменьшая их время, потраченное на ожидание и увеличивая общее качество сервиса, тем самым увеличивая количество поездок.

Рейтинг не стоит хранить в виде числовой оценки: в таком случае пассажиры, которые были плохо оценены прошлыми водителями будут вынуждены ждать появления водителя дольше, снижая общюю удовлетворенность сервисом. Оценку стоит давать в форме вроде: "интересный собеседник", "предпочитает тишину", "лоялен к курению", "надел маску" и т.д.

---
## MVP

Создать макет приложения, демонстрирующий отображение в приложении водителя рейтинга потенциальных пассажиров, а также окно выставления рейтинга в конце поездки, включающее в себя различные оценочные/описательные характеристики пассажира.

---
## Архитектура

В базу данных микросервиса 'orders' к каждой поездке начать добавлять еще и отзыв водителя, добавить индексацию по id пассажира для быстрого вычисления оценки. Если уже существующих подходящих ручек нет, создать новую, которая будет добавлять к строке с информацией о заказе отзыв водителя. При поиске пассажиров приложение водителя будет обращаться к сервису orders и вытаскивать от туда информацию по потенциальным пассажирам. В базу данных добавлять список(массив) классов, которыми водитель охарактеризовал своего пассажира.

---
## Тестирование
Обязательно выполнение всех этапов пирамиды тестирования. В качестве E2E тестов нужно будет проверить весь путь водителя от подбора пассажиров, просмотра их оценки, выбора пассажира и выставления ему оценки в конце поездки.

Юнит тесты должны покрывать случаи, когда у пассажира еще не было поездок или ни в одной поездке ему еще не была выставлена ни одна оценка, ситуации, когда пассажир вел себя по разному в разные поездки(следует выводить лишь наиболее частое поведение) и т.д.

Проведение нагрузочного тестирования не критично важно.

---
## Эксперименты
Возможно, следует сначала включить эту опцию водителям с большим количеством поездок.

В качестве важных бизнес метрик следует отметить отток водителей (должен уменьшиться), среднее время ожидания пассажиром водителя(не должно увеличиться), количество чаевых(может увеличиться) и средняя оценка водителей пользователями(может увеличиться).

---
