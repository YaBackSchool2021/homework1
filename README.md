### Рейтинг пассажира

небольшое описание задачи, понять, зачем делаем фичу.

- Каждому пользователю будет соответствовать рейтинг - число с плавающей точкой от 0.0 до 5.0 включительно, а также краткое описание факторов, занизивших рейтинг.  Рейтинг будет в общем виде определять клиента и его уровень пользования услугами: к примеру, если пассажир оставил после себя мусор  или грубо обращался к водителю, мешал управлению машиной, (другое), это должно негативно отразиться на его рейтинге. Чистота в салоне во время и после поездки, "несоздавание" помех водителю во время движения, адекватное поведение, (возможно, и оставление чаевых:)) должны повышать рейтинг пассажира. Учитывая рейтинг пассажира, можно регулировать показ заказов такси водителям (к примеру, отдавать заказ девушке от клиента, рейтинг которого многократно был занижен из-за "буйного" поведения, не стоит. Также если была негативная оценка водителем пассажира, не показывать некоторое время заказы от этого пассажира)

### Логика выставления оценки водителем после завершения поездки, описать, где и в каком формате должен хранится рейтинг

- После выполнения заказа водитель получает окно, где он может:
1. поставить рейтинг (дать ему показать, сколько звезд из пяти он ставит)
2. если рейтинг не 5.0, водителю дается возможность указать причину снижения рейтинга (а-ля карточки с самыми популярными причинами)
- Рейтинг должен быть актуальным: стоит учитывать последние 20-30 поездок.
### Формат хранения
-связать запись "рейтинг, список причин снижения рейтинга" с id пользователя (можно завести как отдельные таблицы, так и обдумать вариант миграции таблицы для добавления новых колонок).

### Подумать над честной формулой вычисления общей оценки.

- Рейтинг можно ставить только в течение х часов после окончания выполнения заказа (вряд ли водитель даст объективную оценку заказу, которое он выполнил год назад)
- Выставлять рейтинг водитель может только пассажиру, которого он вез. Причина - избежать накрутки (как положительной, так и отрицательной)
- Поскольку нечестность возможна и со стороны водителя, стоит позволить оспаривать последующие негативные отзывы, полученные клиентом.
- Соответственно, должна быть возможность поменять оценку клиента

### ендпоинты (ручки) для клиентского приложения и водительского.

Для водительского приложения:

- send_feedback(client_id, rating, description=None) -> feedback_id: integer
- update_feedback(client_id, feedback_id, rating=None, description=None)
- get_client_rating(client_id) -> client_rating: float

Для клиентского приложения:

- get_client_rating(client_id) -> client_rating: float
- dispute_feedback(client_id, feedback_id)

Для MVP можно предоставить окно с выбором рейтинга ("звездочки") и две причины: "грязь в салоне", "неадекватное поведение". 

Для MVP - не предоставлять пассажиру возможности оспаривать решение

Для MVP - не изменять логику показа заказов, но показывать информацию вида "будь осторожен, клиент в прошлый раз **причина**", если это имеет место быть.

Хранить все данные в отдельной таблице, чтобы не создавать излишних зависимостей между тестовыми данными и активной пользуемой информацией
- схематично изобразить архитектуру/основные сценарии (какие есть компоненты, как связаны между собой, какие ендпоинты вызываются и откуда). Например, для этого можно использовать sequence diagram (plantuml)
- описать протокол и API взаимосвязей между компонентами, например используя swagger (можно описать только 1-2 наиболее сложных ендпоинта)
- описать несколько тестов разного типа (юнит, интеграционные, нагрузочные), на свое усмотрение. Подумать над граничными ситуациями
- подумать над форматом эксперимента для включения фичи, на кого стоит включать в первую очередь, какие кварги использовать, за какими бизнесовыми и техническими метриками следить

На кого включать<br><br>
после внутреннего тестирования можно предложить самым активным по заказам и работе водителям и пассажирам самим выбрать, начать ли тестировать данную фичу

### Метрики
<ul>
<li>Используемость</li>
<li>Нагрузка на систему</li>
<li>Насколько часто рейтинг защищает водителя от нежелаемого клиента, когда происходят ошибки</li>
</ul>